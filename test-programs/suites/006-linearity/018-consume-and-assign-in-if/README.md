Test we can consume a linear value in one branch of an if statement as long as we put it back later.

Originally added by: https://github.com/austral/austral/pull/516
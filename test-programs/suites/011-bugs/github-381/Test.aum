module body Test is
      record Foo: Linear is
          x: Bar;
      end;

      record Bar: Linear is
          y: Nat32;
      end;

      function test2(bar: Bar): Unit is
          let { y: Nat32 } := bar;
          return nil;
      end;

      generic [R: Region]
      function test(ref: &[Foo, R]): Unit is
          test2(ref->x);
          return nil;
      end;

      function main(): ExitCode is
          let foo: Foo := Foo(x => Bar(y => 5));
          test(&foo);
          let { x: Bar } := foo;
          let { y: Nat32 } := x;
          return ExitSuccess();
      end;
end module body.